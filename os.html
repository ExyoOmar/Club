<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic OS | المساعد الدراسي الذكي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background: radial-gradient(circle at top right, #e0f2fe, #f8fafc);
            min-height: 100vh;
            color: #1e293b;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 2rem;
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05);
        }
        .task-done {
            text-decoration: line-through;
            opacity: 0.5;
        }
        .gradient-text {
            background: linear-gradient(90deg, #0284c7, #4f46e5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #bae6fd; border-radius: 10px; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto flex justify-between items-center mb-10">
        <div class="flex items-center gap-4">
            <a href="index.html" class="w-12 h-12 glass-card flex items-center justify-center text-slate-600 hover:text-sky-600 shadow-sm">
                <i class="fas fa-arrow-right"></i>
            </a>
            <div>
                <h1 class="text-2xl font-black text-slate-800 tracking-tight">Academic <span class="text-sky-600">OS</span></h1>
                <p id="live-clock" class="text-[10px] font-bold text-slate-400 uppercase tracking-widest"></p>
            </div>
        </div>
        <div class="bg-white/50 px-4 py-2 rounded-full border border-white text-[10px] font-bold text-slate-500 shadow-sm">
            نظام التشغيل الدراسي v2.0
        </div>
    </div>

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <div class="lg:col-span-4 space-y-6">
            
            <div class="glass-card p-8 text-center relative overflow-hidden group">
                <div class="absolute -top-10 -right-10 opacity-5">
                    <i class="fas fa-graduation-cap text-9xl"></i>
                </div>
                <h3 class="text-slate-400 font-bold text-[10px] uppercase mb-4 tracking-widest">حالة اليوم</h3>
                <div id="status-icon" class="text-5xl text-sky-500 mb-4 duration-500">
                    <i class="fas fa-book-reader"></i>
                </div>
                <div id="daily-quote" class="text-lg font-extrabold text-slate-800 mb-3 leading-tight px-2">
                    "جاري تحميل الحكمة اليومية..."
                </div>
                <span id="sub-status" class="text-[11px] font-black text-sky-600 bg-sky-50 py-1.5 px-4 rounded-full inline-block border border-sky-100">
                    جاري التحديث...
                </span>
            </div>

            <div class="glass-card p-6 text-center border-2 border-orange-100/50">
                <h3 class="text-orange-600 font-black text-xs mb-4 flex items-center justify-center gap-2">
                    <i class="fas fa-stopwatch"></i> مؤقت التركيز (25 دقيقة)
                </h3>
                <div id="timer-display" class="text-5xl font-black text-slate-800 mb-6 tracking-tighter">25:00</div>
                <div class="flex gap-2 justify-center">
                    <button onclick="startTimer()" id="timer-btn" class="flex-1 bg-orange-500 text-white py-3 rounded-2xl font-bold hover:bg-orange-600 transition-all shadow-lg shadow-orange-200">ابدأ</button>
                    <button onclick="resetTimer()" class="px-6 bg-slate-100 text-slate-500 rounded-2xl font-bold hover:bg-slate-200 transition-all">
                        <i class="fas fa-undo"></i>
                    </button>
                </div>
            </div>

            <div class="glass-card p-6 bg-yellow-50/30 border-yellow-200/50 border-dashed border-2">
                <h3 class="text-yellow-700 font-black mb-3 text-xs flex items-center gap-2">
                    <i class="fas fa-sticky-note"></i> ملاحظة سريعة
                </h3>
                <textarea id="stickyNote" oninput="saveNote()" class="w-full h-32 bg-transparent border-none outline-none font-medium text-slate-700 placeholder:text-yellow-600/30 text-sm leading-relaxed" placeholder="دون ملاحظاتك السريعة هنا..."></textarea>
            </div>
        </div>

        <div class="lg:col-span-8 space-y-6">
            
            <div class="glass-card p-8 md:p-10 h-full flex flex-col shadow-xl shadow-sky-900/5">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-black text-slate-800">قائمة المهام</h2>
                        <p class="text-slate-500 font-medium text-sm mt-1 tracking-tight">أضف واجباتك واختباراتك لليوم</p>
                    </div>
                    <div id="task-count" class="bg-slate-900 text-white w-12 h-12 rounded-2xl flex items-center justify-center font-bold shadow-lg shadow-slate-200">0</div>
                </div>

                <div class="flex gap-3 mb-8 bg-white/50 p-2 rounded-[2rem] border border-white shadow-sm">
                    <input type="text" id="taskInput" placeholder="ماذا ستنجز اليوم؟" 
                           class="flex-1 bg-transparent border-none outline-none px-6 font-bold text-slate-700 placeholder:text-slate-300">
                    <button onclick="addTask()" class="bg-sky-600 text-white px-8 py-4 rounded-[1.5rem] font-bold hover:bg-sky-700 transition-all shadow-lg shadow-sky-200">
                        إضافة
                    </button>
                </div>

                <div id="tasksList" class="space-y-3 overflow-y-auto max-h-[450px] pr-2"></div>

                <div id="emptyState" class="hidden flex-col items-center justify-center py-20 text-slate-300">
                    <div class="w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-check-double text-3xl"></i>
                    </div>
                    <p class="font-bold">لا توجد مهام حالياً.. أنت بطل!</p>
                </div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <a href="https://rawafed.edu.ps" target="_blank" class="glass-card p-4 flex items-center gap-3 hover:bg-white">
                    <div class="w-10 h-10 bg-sky-100 text-sky-600 rounded-xl flex items-center justify-center"><i class="fas fa-globe"></i></div>
                    <span class="text-xs font-black">روافد</span>
                </a>
                <a href="https://eschool.edu.ps/" target="_blank" class="glass-card p-4 flex items-center gap-3 hover:bg-white">
                    <div class="w-10 h-10 bg-emerald-100 text-emerald-600 rounded-xl flex items-center justify-center"><i class="fas fa-laptop-code"></i></div>
                    <span class="text-xs font-black">E-School</span>
                </a>
                </div>
        </div>
    </div>

    <script>
        // --- 1. الساعة والتاريخ ---
        function updateClock() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            document.getElementById('live-clock').innerText = now.toLocaleDateString('ar-EG', options);
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- 2. ويدجت الحالة والحكمة ---
        function updateAcademicWidget() {
            const quotes = [
                "تنظيم الوقت هو نصف المذاكرة",
                "لا تؤجل عمل اليوم إلى الغد",
                "الفيزياء ليست صعبة، هي فقط تحتاج لتخيل",
                "العاشر (ب) هم قادة المستقبل دائماً",
                "التركيز في الحصة يوفر عليك ساعات دراسة",
                "كن شغوفاً بالعلم، يفتح لك الأبواب المغلقة"
            ];
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            document.getElementById('daily-quote').innerText = `"${quotes[dayOfYear % quotes.length]}"`;

            const hour = new Date().getHours();
            const statusBox = document.getElementById('sub-status');
            const iconBox = document.getElementById('status-icon');

            if (hour >= 8 && hour < 13) {
                statusBox.innerText = "وقت الحصص الدراسية";
                iconBox.innerHTML = '<i class="fas fa-chalkboard-teacher animate-pulse"></i>';
            } else if (hour >= 13 && hour < 16) {
                statusBox.innerText = "وقت الراحة والمراجعة";
                iconBox.innerHTML = '<i class="fas fa-coffee text-amber-500"></i>';
            } else {
                statusBox.innerText = "وقت التحضير لغدٍ أفضل";
                iconBox.innerHTML = '<i class="fas fa-moon text-indigo-400"></i>';
            }
        }
        updateAcademicWidget();

        // --- 3. نظام المهام ---
        let tasks = JSON.parse(localStorage.getItem('academic_tasks')) || [];
        function renderTasks() {
            const list = document.getElementById('tasksList');
            const empty = document.getElementById('emptyState');
            list.innerHTML = '';
            document.getElementById('task-count').innerText = tasks.length;
            if (tasks.length === 0) { empty.classList.replace('hidden', 'flex'); }
            else {
                empty.classList.replace('flex', 'hidden');
                tasks.forEach((task, index) => {
                    const el = document.createElement('div');
                    el.className = `flex items-center justify-between p-5 bg-white/60 border border-white rounded-[1.5rem] group hover:bg-white transition-all`;
                    el.innerHTML = `
                        <div class="flex items-center gap-4">
                            <button onclick="toggleTask(${index})" class="w-6 h-6 rounded-full border-2 border-sky-200 flex items-center justify-center transition-all ${task.done ? 'bg-sky-500 border-sky-500' : ''}">
                                ${task.done ? '<i class="fas fa-check text-white text-[10px]"></i>' : ''}
                            </button>
                            <span class="font-bold text-sm ${task.done ? 'task-done text-slate-400' : 'text-slate-700'}">${task.text}</span>
                        </div>
                        <button onclick="deleteTask(${index})" class="text-slate-300 hover:text-rose-500 transition-all md:opacity-0 group-hover:opacity-100">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    `;
                    list.appendChild(el);
                });
            }
            localStorage.setItem('academic_tasks', JSON.stringify(tasks));
        }
        function addTask() {
            const input = document.getElementById('taskInput');
            if (input.value.trim()) { tasks.unshift({text: input.value, done: false}); input.value=''; renderTasks(); }
        }
        function toggleTask(i) { tasks[i].done = !tasks[i].done; renderTasks(); }
        function deleteTask(i) { tasks.splice(i, 1); renderTasks(); }
        renderTasks();

        // --- 4. مؤقت بومودورو ---
        let timer;
        let timeLeft = 25 * 60;
        let isRunning = false;
        function startTimer() {
            if (isRunning) { clearInterval(timer); document.getElementById('timer-btn').innerText = 'استئناف'; }
            else {
                timer = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) { clearInterval(timer); alert("انتهى الوقت! خذ قسطاً من الراحة."); resetTimer(); }
                }, 1000);
                document.getElementById('timer-btn').innerText = 'إيقاف';
            }
            isRunning = !isRunning;
        }
        function resetTimer() { clearInterval(timer); timeLeft = 25 * 60; isRunning = false; updateTimerDisplay(); document.getElementById('timer-btn').innerText = 'ابدأ'; }
        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60); const s = timeLeft % 60;
            document.getElementById('timer-display').innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
        }

        // --- 5. الملاحظات ---
        function saveNote() { localStorage.setItem('academic_note', document.getElementById('stickyNote').value); }
        document.getElementById('stickyNote').value = localStorage.getItem('academic_note') || '';

        // دعم مفتاح Enter
        document.getElementById('taskInput').addEventListener('keypress', (e) => { if(e.key === 'Enter') addTask(); });
    </script>
</body>
</html>